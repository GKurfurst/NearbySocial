<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>test</title>
</head>
<body>

<h1>test</h1>

<div id="query-results"></div>

<form id="query-form">
    <input type="number" id="user_id">
    <button type="submit">发送</button>
</form>

<script>
    var ws = new WebSocket("ws://localhost:8080/ws");

    ws.onmessage = function(event) {
        var query_results = document.getElementById('query-results')
        var query_result = document.createElement('div')
        var jsonData = JSON.parse(event.data);
        query_result.innerHTML = jsonData.username
        query_results.appendChild(query_result)
    };

    var form = document.getElementById('query-form');
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        var query_results = document.getElementById('query-results')
        var query_result = document.createElement('div')
        var input = document.getElementById("user_id");
        query_result.innerHTML = input.value
        query_results.appendChild(query_result)
        ws.send(input.value);
        input.value = '';
    });
</script>

</body>
</html>